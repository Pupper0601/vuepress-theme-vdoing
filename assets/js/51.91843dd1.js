(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{581:function(s,a,e){"use strict";e.r(a);var t=e(30),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"docker-技术"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-技术"}},[s._v("#")]),s._v(" Docker 技术")]),s._v(" "),e("h2",{attrs:{id:"一、-docker-技术简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、-docker-技术简介"}},[s._v("#")]),s._v(" 一、 Docker 技术简介")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210722171513.png",alt:"image-20210722171513055"}})]),s._v(" "),e("h3",{attrs:{id:"_1-docker-组成"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-docker-组成"}},[s._v("#")]),s._v(" 1. docker 组成")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("镜像")]),s._v("：相当于python里面类的概念，是静态的，不能直接使用")]),s._v(" "),e("li",[e("code",[s._v("容器")]),s._v("：是通过镜像创建的，相当于实例的概念，是动态的，可以访问的")]),s._v(" "),e("li",[e("code",[s._v("仓库")]),s._v("：存放镜像的地方")]),s._v(" "),e("li",[e("code",[s._v("docker宿主机")]),s._v("：你的docker安装在哪一个机器，那个机器就是宿主机")])]),s._v(" "),e("h3",{attrs:{id:"_2-docker-应用场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-docker-应用场景"}},[s._v("#")]),s._v(" 2. docker 应用场景")]),s._v(" "),e("ul",[e("li",[s._v("web 应用的自动化打包和发布")]),s._v(" "),e("li",[s._v("自动化测试和持续集成、发布")]),s._v(" "),e("li",[s._v("在服务型环境中部署和调整数据库或其他的后台应用")]),s._v(" "),e("li",[s._v("使用docker可以实现开发人员的开发环境、测试人员的测试环境、运维人员的生产环境的一致性")])]),s._v(" "),e("h2",{attrs:{id:"二、-centos-下安装-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、-centos-下安装-docker"}},[s._v("#")]),s._v(" 二、 CentOS 下安装 Docker")]),s._v(" "),e("h3",{attrs:{id:"_1-版本检查"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-版本检查"}},[s._v("#")]),s._v(" 1. 版本检查")]),s._v(" "),e("ul",[e("li",[s._v("CentOS 7 以上版本")]),s._v(" "),e("li",[s._v("操作系统centos-extras 库必须启用。默认情况下，此库是启用的，但是如果已禁用，则必须重新启动它")]),s._v(" "),e("li",[e("strong",[s._v("Docker 要求 CentOS 内核版本高于 3.10")])])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看系统版本")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -r\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210722173932.png",alt:"image-20210722173932301"}})]),s._v(" "),e("h3",{attrs:{id:"_2-安装-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-docker"}},[s._v("#")]),s._v(" 2. 安装 Docker")]),s._v(" "),e("h4",{attrs:{id:"_1-安装需要的软件包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装需要的软件包"}},[s._v("#")]),s._v(" 1. 安装需要的软件包")]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[s._v("yum install "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y yum"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("utils device"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mapper"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("persistent"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("data lvm2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210722175132.png",alt:"image-20210722175132430"}})]),s._v(" "),e("ul",[e("li",[e("code",[s._v("yum-util")]),s._v(" 是 yum 仓库管理扩展工具包，即它提供了 "),e("code",[s._v("yum-config-manager")]),s._v(" 功能")]),s._v(" "),e("li",[s._v("另外两个是 "),e("code",[s._v("devicemapper")]),s._v(" 驱动依赖的")])]),s._v(" "),e("h4",{attrs:{id:"_2-添加-yum-源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-添加-yum-源"}},[s._v("#")]),s._v(" 2. 添加 yum 源")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 阿里云镜像仓库")]),s._v("\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 官网源镜像仓库")]),s._v("\nyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210722175521.png",alt:"image-20210722175521408"}})]),s._v(" "),e("ul",[e("li",[s._v("利用 "),e("code",[s._v("yum-config-manager")]),s._v(" 添加yum仓库")]),s._v(" "),e("li",[s._v("查看仓库 "),e("code",[s._v("ll /etc/yum.repos.d")])])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210722175617.png",alt:"image-20210722175617672"}})]),s._v(" "),e("h4",{attrs:{id:"_3-更新yum缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-更新yum缓存"}},[s._v("#")]),s._v(" 3.更新yum缓存")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum makecache fast\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210722175641.png",alt:"image-20210722175641435"}})]),s._v(" "),e("h4",{attrs:{id:"_4-查看仓库中-docker-的版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-查看仓库中-docker-的版本"}},[s._v("#")]),s._v(" 4.查看仓库中 docker 的版本")]),s._v(" "),e("p",[s._v("选择对应的版本安装，列出并排序存储库中可用的版本。按版本号（从高到低）对结果进行排序")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum list docker-ce --showduplicates "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -r\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210722175723.png",alt:"image-20210722175722956"}})]),s._v(" "),e("h4",{attrs:{id:"_5-安装-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-安装-docker"}},[s._v("#")]),s._v(" 5. 安装 docker")]),s._v(" "),e("ol",[e("li",[s._v("安装最新版本")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y docker-ce\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("安装指定版本")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce-版本号\n\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docer-ce-17.12.1.ce\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"_6-验证是否安装成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-验证是否安装成功"}},[s._v("#")]),s._v(" 6. 验证是否安装成功")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker version\n或者\ndocker -v\n\n有client和service两部分标识docker安装并启动成功\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210722180548.png",alt:"image-20210722180548342"}})]),s._v(" "),e("h4",{attrs:{id:"_7-启动docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-启动docker"}},[s._v("#")]),s._v(" 7. 启动docker")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("systemctl start docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",[e("li",[e("p",[s._v("启动 ： "),e("code",[s._v("systemctl start docker")])])]),s._v(" "),e("li",[e("p",[s._v("关闭 ： "),e("code",[s._v("systemctl stop docker")])])]),s._v(" "),e("li",[e("p",[s._v("重启 ： "),e("code",[s._v("systemctl restart docker")])])])]),s._v(" "),e("h4",{attrs:{id:"_8-开机自动启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-开机自动启动"}},[s._v("#")]),s._v(" 8. 开机自动启动")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("systemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_9-查看docker运行状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-查看docker运行状态"}},[s._v("#")]),s._v(" 9. 查看docker运行状态")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("systemctl status docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210722181338.png",alt:"image-20210722181338012"}})]),s._v(" "),e("h4",{attrs:{id:"_10-关闭防火墙"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-关闭防火墙"}},[s._v("#")]),s._v(" 10. 关闭防火墙")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("systemctl stop firewalld \t"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 临时关闭")]),s._v("\n\nsystemctl stop disable\t\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 永久关闭")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"三、docker-镜像-加速-阿里云"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、docker-镜像-加速-阿里云"}},[s._v("#")]),s._v(" 三、Docker 镜像 加速（阿里云）")]),s._v(" "),e("blockquote",[e("p",[s._v("默认情况下，docker下载镜像是从官网下载，下载速度特别特别的慢。")]),s._v(" "),e("p",[s._v("使用阿里云加速器可以提升获取Docker官方镜像的速度 。")])]),s._v(" "),e("h3",{attrs:{id:"_1-阿里云-镜像-加速"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-阿里云-镜像-加速"}},[s._v("#")]),s._v(" 1. 阿里云 镜像 加速")]),s._v(" "),e("p",[s._v("每个账号的 镜像 加速 地址都不同")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://cr.console.aliyun.com/cn-beijing/instances/mirrors",target:"_blank",rel:"noopener noreferrer"}},[s._v("阿里云 --- 容器镜像服务 地址"),e("OutboundLink")],1),s._v(" https://cr.console.aliyun.com/cn-beijing/instances/mirrors")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210723102829.png",alt:"image-20210723102829583"}})]),s._v(" "),e("h3",{attrs:{id:"_2-在指定目录创建文件-如已存在请忽略此步"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-在指定目录创建文件-如已存在请忽略此步"}},[s._v("#")]),s._v(" 2. 在指定目录创建文件（如已存在请忽略此步）")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/docker/daemon.json\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_3-修改文件内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改文件内容"}},[s._v("#")]),s._v(" 3. 修改文件内容")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://elk58vq5.mirror.aliyuncs.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210723103329.png",alt:"image-20210723103329159"}})]),s._v(" "),e("h3",{attrs:{id:"_4-重启-docker-服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-重启-docker-服务"}},[s._v("#")]),s._v(" 4. 重启 Docker 服务")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("systemctl restart docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"四、docker-中安装镜像及操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、docker-中安装镜像及操作"}},[s._v("#")]),s._v(" 四、Docker 中安装镜像及操作")]),s._v(" "),e("h3",{attrs:{id:"_1-获取-镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-获取-镜像"}},[s._v("#")]),s._v(" 1. 获取 镜像")]),s._v(" "),e("h4",{attrs:{id:"_1-查看-本地-镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看-本地-镜像"}},[s._v("#")]),s._v(" 1. 查看 本地 镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker images\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210723100934.png",alt:"image-20210723100934224"}})]),s._v(" "),e("h4",{attrs:{id:"_2-搜索-镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-搜索-镜像"}},[s._v("#")]),s._v(" 2. 搜索 镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker search tomcat\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210723101257.png",alt:"image-20210723101257043"}})]),s._v(" "),e("h4",{attrs:{id:"_3-拉取-最新-镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-拉取-最新-镜像"}},[s._v("#")]),s._v(" 3. 拉取 最新 镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker pull tomcat\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",[e("li",[s._v("拉取最新镜像 ： "),e("code",[s._v("docker pull tomcat")])]),s._v(" "),e("li",[s._v("拉取指定镜像  ： "),e("code",[s._v("docker pull tomcat:7")])]),s._v(" "),e("li",[s._v("删除镜像 ： "),e("code",[s._v("docker rmi 镜像id")])])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210723104400.png",alt:"image-20210723104400534"}})]),s._v(" "),e("h4",{attrs:{id:"_4-查看-拉取的-镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-查看-拉取的-镜像"}},[s._v("#")]),s._v(" 4. 查看 拉取的 镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker images\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210723104454.png",alt:"image-20210723104454135"}})]),s._v(" "),e("h3",{attrs:{id:"_2-创建-容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建-容器"}},[s._v("#")]),s._v(" 2. 创建 容器")]),s._v(" "),e("h4",{attrs:{id:"_1-创建容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建容器"}},[s._v("#")]),s._v(" 1. 创建容器")]),s._v(" "),e("p",[s._v("根据tomcat镜像，创建一个myTomcat容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker create --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myTomcat tomcat\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210723104842.png",alt:"image-20210723104842230"}})]),s._v(" "),e("h4",{attrs:{id:"_2-查看-容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-查看-容器"}},[s._v("#")]),s._v(" 2. 查看 容器")]),s._v(" "),e("ul",[e("li",[s._v("查看运行的容器：")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("查看所有的容器：")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210723105055.png",alt:"image-20210723105055251"}})]),s._v(" "),e("h4",{attrs:{id:"_3-运行-容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-运行-容器"}},[s._v("#")]),s._v(" 3. 运行 容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker start myTomcat\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("start 后面可以跟 容器的"),e("code",[s._v("id")]),s._v("（前2-3位） 或者 "),e("code",[s._v("name")])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210723111424.png",alt:"image-20210723111424314"}})]),s._v(" "),e("ul",[e("li",[e("p",[s._v("停止 容器：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker stop myTomcat\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("删除 没有运行的 容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" 容器id或者名字\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("删除 运行的容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f 容器ID或者名字\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("删除所有容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先停止所有的容器")]),s._v("\ndocker stop "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a -q"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a -q"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])])])]),s._v(" "),e("h3",{attrs:{id:"_3-创建-容器的一些-操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建-容器的一些-操作"}},[s._v("#")]),s._v(" 3. 创建 容器的一些 操作")]),s._v(" "),e("h4",{attrs:{id:"_1-搭建-web-项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-搭建-web-项目"}},[s._v("#")]),s._v(" 1. 搭建 web 项目")]),s._v(" "),e("ol",[e("li",[s._v("访问端口 你需要访问的是容器内部的端口")]),s._v(" "),e("li",[e("code",[s._v("war项目文件")]),s._v("这么传递给容器里的"),e("code",[s._v("tomcat")]),s._v("里"),e("code",[s._v("webapps")]),s._v("下")])]),s._v(" "),e("h4",{attrs:{id:"_2-创建-并-启动容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建-并-启动容器"}},[s._v("#")]),s._v(" 2. 创建 并 启动容器")]),s._v(" "),e("p",[e("code",[s._v("docker run 后面的参数")]),s._v(" ：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-i")]),s._v(" ：运行容器")]),s._v(" "),e("li",[e("code",[s._v("-t")]),s._v(" ： 容器启动后，进入命令行")]),s._v(" "),e("li",[e("code",[s._v("-v")]),s._v(" ： 目录映射 --- 挂载\n"),e("ul",[e("li",[e("code",[s._v("-v 宿主机目录:容器目录")])])])]),s._v(" "),e("li",[e("code",[s._v("-d")]),s._v(" ： 守护进程 --- 后台运行")]),s._v(" "),e("li",[e("code",[s._v("-p")]),s._v(" ： 端口映射\n"),e("ul",[e("li",[e("code",[s._v("-p 宿主机端口:容器端口")])])])])]),s._v(" "),e("p",[e("strong",[s._v("创建容器，并且进入命令行---进入容器")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run -it --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myTomcat tomcat/bin/bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_3-创建-运行-一个守护的-容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建-运行-一个守护的-容器"}},[s._v("#")]),s._v(" 3. 创建 运行 一个守护的 容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run -id --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myTomcat2 tomcat\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_4-进入容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-进入容器"}},[s._v("#")]),s._v(" 4. 进入容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it myTomcat2 /bin/bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_5-退出容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-退出容器"}},[s._v("#")]),s._v(" 5. 退出容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_4-宿主机-服务器-与-docker-容器的-文件传递"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-宿主机-服务器-与-docker-容器的-文件传递"}},[s._v("#")]),s._v(" 4. 宿主机（服务器） 与 docker 容器的 文件传递")]),s._v(" "),e("blockquote",[e("p",[s._v("传递文件时，都需要在 宿主机 中输入命令")])]),s._v(" "),e("h4",{attrs:{id:"_1-宿主机-向-docker-容器-传递文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-宿主机-向-docker-容器-传递文件"}},[s._v("#")]),s._v(" 1. 宿主机 向 docker 容器 传递文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker 拷贝 文件名 容器名称:拷贝路径")]),s._v("\n\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" xt.txt myTomcat:/\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"_2-docker-容器-向-宿主机-传递文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-docker-容器-向-宿主机-传递文件"}},[s._v("#")]),s._v(" 2. docker 容器 向 宿主机 传递文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker 拷贝 容器名称:文件名 拷贝路径")]),s._v("\n\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" myTomcat:/文件名 /root\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"_5-访问-tomcat"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-访问-tomcat"}},[s._v("#")]),s._v(" 5. 访问 tomcat")]),s._v(" "),e("h4",{attrs:{id:"_1-启动并作为守护进程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-启动并作为守护进程"}},[s._v("#")]),s._v(" 1. 启动并作为守护进程")]),s._v(" "),e("blockquote",[e("ul",[e("li",[e("code",[s._v("-p")]),s._v(" ： 宿主机的端口:容器里应用的端口 --- 8080")]),s._v(" "),e("li",[e("code",[s._v("-v")]),s._v(" ： war挂载到宿主机         宿主机路径:容器路径（路径会新建）")])])]),s._v(" "),e("p",[e("strong",[s._v("创建并运行一个名为 myTomcat 的守护容器，端口为8080，war挂载到了宿主机的 /usr/local/tomcat/webapps 目录")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run -id --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myTomcat -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 -v /usr/local/tomcat/webapps:/usr/local/tomcat/webapps tomcat\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("把 war 包放到宿主机的 挂载目录里，直接刷新浏览器就可以出现项目的页面")]),s._v(" "),e("h4",{attrs:{id:"_2-启动容器时关联其他容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动容器时关联其他容器"}},[s._v("#")]),s._v(" 2. 启动容器时关联其他容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run -id --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tomcat2 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 --link mysql --link redis --link rabbitmq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"五、-查看日志-docker-logs-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、-查看日志-docker-logs-命令"}},[s._v("#")]),s._v(" 五、 查看日志 （ docker logs 命令）")]),s._v(" "),e("p",[e("code",[s._v("docker logs [options] 容器名称或ID")]),s._v(" 获取容器日志")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("名字")]),s._v(" "),e("th",[s._v("默 认 值")]),s._v(" "),e("th",[s._v("描述")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("–details")]),s._v(" "),e("td",[s._v("显示提供给日志的额外细节")]),s._v(" "),e("td")]),s._v(" "),e("tr",[e("td",[s._v("–follow或-f")]),s._v(" "),e("td",[s._v("按日志输出")]),s._v(" "),e("td")]),s._v(" "),e("tr",[e("td",[s._v("–since")]),s._v(" "),e("td",[s._v("从某个时间开始显示，例如2013- 01-02T13:23:37")]),s._v(" "),e("td")]),s._v(" "),e("tr",[e("td",[s._v("–tail")]),s._v(" "),e("td",[s._v("all")]),s._v(" "),e("td",[s._v("从日志末尾多少行开始显示")])]),s._v(" "),e("tr",[e("td",[s._v("– timestamps 或-t")]),s._v(" "),e("td",[s._v("显示时间戳")]),s._v(" "),e("td")]),s._v(" "),e("tr",[e("td",[s._v("–until")]),s._v(" "),e("td",[s._v("打印某个时间以前的日志，例如 2013-01-02T13:23:37")]),s._v(" "),e("td")])])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过docker logs命令可以查看容器的日志。")]),s._v("\n\ndocker logs -f --tail "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" a4dac74d48f7\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看指定时间后的日志，只显示最后100行：")]),s._v("\n\ndocker logs -f -t --since"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2018-02-08"')]),s._v(" --tail"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" CONTAINER_ID\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看某时间段日志")]),s._v("\n \ndocker logs -t --since"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2018-02-08T13:23:37"')]),s._v(" --until "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2018-02-09T12:23:37"')]),s._v(" CONTAINER_ID\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"六、容器-图形化管理工具-portainer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六、容器-图形化管理工具-portainer"}},[s._v("#")]),s._v(" 六、容器 图形化管理工具（ Portainer ）")]),s._v(" "),e("p",[s._v("1.查看portainer镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker search portainer\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("2.选择喜欢的portainer风格镜像，下载")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker pull portainer/portainer\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("3.启动dockerui容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run -id --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("portainer -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v(":9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("4、浏览器访问 http://你虚拟机的ip:9000, 设置一个密码即可，点击创建用户 密码要8位以上")]),s._v(" "),e("p",[s._v("5、我们搭建的是单机版，进入页面直接选择Local ，点击连接")]),s._v(" "),e("h2",{attrs:{id:"七、docker-旧版卸载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#七、docker-旧版卸载"}},[s._v("#")]),s._v(" 七、docker 旧版卸载")]),s._v(" "),e("h3",{attrs:{id:"_1-卸载它们以及相关的依赖项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-卸载它们以及相关的依赖项"}},[s._v("#")]),s._v(" 1. 卸载它们以及相关的依赖项")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove docker "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-client "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-client-latest "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-common "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-latest "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-latest-logrotate "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-logrotate "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-engine\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-安装-docker-engine-community"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-docker-engine-community"}},[s._v("#")]),s._v(" 2. 安装 Docker Engine-Community")]),s._v(" "),e("p",[s._v("在新主机上首次安装 Docker Engine-Community 之前，需要设置 Docker 仓库。")]),s._v(" "),e("p",[s._v("之后，您可以从仓库安装和更新 Docker。")]),s._v(" "),e("h4",{attrs:{id:"_1-设置仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-设置仓库"}},[s._v("#")]),s._v(" 1. 设置仓库")]),s._v(" "),e("p",[s._v("安装所需的软件包。")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("device-mapper-persistent-data "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lvm2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("使用以下命令来设置稳定的仓库。阿里云")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("--add-repo "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" http://mirrors.aliyun.com/dockerce/linux/centos/docker-ce.repo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_2-安装-docker-engine-community-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-docker-engine-community-2"}},[s._v("#")]),s._v(" 2. 安装 Docker Engine-Community")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-clicontainerd.io\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("一直输入y回车即可")]),s._v(" "),e("h3",{attrs:{id:"_3-启动-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-启动-docker"}},[s._v("#")]),s._v(" 3. 启动 docker")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"八、-修改-容器的-映射端口及挂载目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#八、-修改-容器的-映射端口及挂载目录"}},[s._v("#")]),s._v(" 八、 修改 容器的 映射端口及挂载目录")]),s._v(" "),e("h3",{attrs:{id:"_1-停止容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-停止容器"}},[s._v("#")]),s._v(" 1. 停止容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker stop 容器id或名称\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-停止-docker-服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-停止-docker-服务"}},[s._v("#")]),s._v(" 2. 停止 docker 服务")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("systemctl stop docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_3-修改-hostconfig-json-文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改-hostconfig-json-文件"}},[s._v("#")]),s._v(" 3. 修改 hostconfig.json 文件")]),s._v(" "),e("blockquote",[e("p",[e("code",[s._v("config,v2.json")]),s._v("  中如果也记录了端口，需要一并修改")])]),s._v(" "),e("p",[s._v("文件目录：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var/lib/docker/containers/容器id\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" hostconfig.json\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210728171311.png",alt:"image-20210728171310995"}})]),s._v(" "),e("h4",{attrs:{id:"_1-修改-映射端口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-修改-映射端口"}},[s._v("#")]),s._v(" 1. 修改 映射端口")]),s._v(" "),e("p",[s._v("没有端口映射时："),e("code",[s._v("“PortBindings”:{}")])]),s._v(" "),e("p",[s._v("增加一个端口映射：")]),s._v(" "),e("blockquote",[e("p",[s._v("前面的 “3306” 为 容器端口， 后面的 “3307” 为宿主机端口")]),s._v(" "),e("p",[s._v("如果修改现有端口映射，则可以直接修改")])]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[s._v("“PortBindings”"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("“"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp”"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("“HostIp”"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("“HostPort”"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("“"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),s._v("”"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_2-修改-挂载目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改-挂载目录"}},[s._v("#")]),s._v(" 2. 修改 挂载目录")]),s._v(" "),e("blockquote",[e("p",[s._v("前面的地址为 宿主机挂载目录，后面的地址为 容器目录地址")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Binds"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/run/docker.sock:/var/run/docker.sock"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_4-启动-docker-服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动-docker-服务"}},[s._v("#")]),s._v(" 4. 启动 docker 服务")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("systemstl start docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_5-启动-容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-启动-容器"}},[s._v("#")]),s._v(" 5. 启动 容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker start 容器id\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_6-查看修改后的结果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-查看修改后的结果"}},[s._v("#")]),s._v(" 6. 查看修改后的结果")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_7-查看修改后的挂载目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-查看修改后的挂载目录"}},[s._v("#")]),s._v(" 7. 查看修改后的挂载目录")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker inspect container_id | grep Mounts -A 20\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"九、-同步时间"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#九、-同步时间"}},[s._v("#")]),s._v(" 九、 同步时间")]),s._v(" "),e("h3",{attrs:{id:"_1-查看宿主机时间"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看宿主机时间"}},[s._v("#")]),s._v(" 1.查看宿主机时间")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-安装-ntp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-ntp"}},[s._v("#")]),s._v(" 2. 安装 ntp")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ntp\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_3-同步时间"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-同步时间"}},[s._v("#")]),s._v(" 3. 同步时间")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/localtime 容器id或名称:/etc/localtime\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("报错：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210730163135.png",alt:"image-20210730163135276"}})]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/share/zoneinfo/Asia/Shanghai 容器ID或名称:/etc/localtime\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_4-重启-容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-重启-容器"}},[s._v("#")]),s._v(" 4. 重启 容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker restart 容器id或名称\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[e("strong",[s._v("注意事项：")])]),s._v(" "),e("ul",[e("li",[s._v("可能网络会断开，请重新reboot下linux")]),s._v(" "),e("li",[s._v("虚拟机的ip可能会改变")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);