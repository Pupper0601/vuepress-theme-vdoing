(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{611:function(t,a,e){"use strict";e.r(a);var s=e(30),_=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"django-高级技巧"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#django-高级技巧"}},[t._v("#")]),t._v(" Django 高级技巧")]),t._v(" "),e("h2",{attrs:{id:"一、表单"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、表单"}},[t._v("#")]),t._v(" 一、表单")]),t._v(" "),e("h3",{attrs:{id:"_1-表单必填属性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-表单必填属性"}},[t._v("#")]),t._v(" 1. 表单必填属性")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("action")]),t._v(" ： 提交的URL")]),t._v(" "),e("li",[e("code",[t._v("method")]),t._v(" ： 请求方法， get 或者 post")]),t._v(" "),e("li",[e("code",[t._v("enctype")]),t._v(" ： 三种编码方式\n"),e("ul",[e("li",[t._v("application/x-www-form-urlencoded           键值对方式")]),t._v(" "),e("li",[t._v("multipart/form-data           二进制编码")]),t._v(" "),e("li",[t._v("text/plain                         文本方式")])])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210601175923.png",alt:"image-20210601175923085"}})]),t._v(" "),e("h3",{attrs:{id:"_2-处理-request"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-处理-request"}},[t._v("#")]),t._v(" 2. 处理 request")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("判断请求方法 "),e("code",[t._v("request.method")])]),t._v(" "),e("ul",[e("li",[t._v("值是大写的 POST 、GET 、 PUT 、 DELETE")])])]),t._v(" "),e("li",[e("p",[t._v("获取 post 表单数据 "),e("code",[t._v("request.POST[key]")]),t._v("  或者 "),e("code",[t._v("request.POST.get()")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("request.POST 返回的是一个字典")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210601180310.png",alt:"image-20210601180310843"}})])])])])]),t._v(" "),e("h2",{attrs:{id:"二、-django-安全策略"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、-django-安全策略"}},[t._v("#")]),t._v(" 二、 Django 安全策略")]),t._v(" "),e("h3",{attrs:{id:"_1-csrf-防御机制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-csrf-防御机制"}},[t._v("#")]),t._v(" 1. CSRF 防御机制")]),t._v(" "),e("p",[e("code",[t._v("settings.py")]),t._v(" 文件")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210601151226.png",alt:"image-20210601151225890"}})]),t._v(" "),e("p",[e("strong",[t._v("CSRF")]),t._v(" : 跨站请求伪造，是一个常见的网络攻击手段。")]),t._v(" "),e("p",[t._v("Django 默认为开启了 防范 CSRF 攻击机制。")]),t._v(" "),e("p",[t._v("对于 GET 请求，一般来说没有这个问题，CSRF 通常是针对 POST 或 PUT 方法的。")]),t._v(" "),e("h3",{attrs:{id:"_2-处理方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-处理方式"}},[t._v("#")]),t._v(" 2. 处理方式")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("将防御机制注释")]),t._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 'django.middleware.csrf.CsrfViewMiddleware',")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])])]),t._v(" "),e("li",[e("p",[t._v("使用 "),e("code",[t._v("@csrf_exempt")]),t._v(" 装饰器")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210601151842.png",alt:"image-20210601151842464"}})])]),t._v(" "),e("li",[e("p",[t._v("在表单内部加上 "),e("code",[t._v("{%csrf_token%}")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210601152001.png",alt:"image-20210601152001355"}})])])]),t._v(" "),e("h2",{attrs:{id:"三、-请求的重定向"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、-请求的重定向"}},[t._v("#")]),t._v(" 三、 请求的重定向")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("http 重定向")]),t._v(" "),e("ul",[e("li",[t._v("把原本访问 A 的请求 转给 B")]),t._v(" "),e("li",[t._v("状态码 ： 301（永久重定向） 302（临时重定向）")])])]),t._v(" "),e("li",[e("p",[t._v("Django 快捷方法")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("redirect（视图，参数）      对应状态码 302")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210601175743.png",alt:"image-20210601175743387"}})])])])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://pupperc.com/img/20210601161815.png",alt:"image-20210601161814945"}})]),t._v(" "),e("h2",{attrs:{id:"四、-django-单元测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、-django-单元测试"}},[t._v("#")]),t._v(" 四、 Django 单元测试")]),t._v(" "),e("p",[t._v("Django 的单元测试采用 Python 的标准模块："),e("code",[t._v("unittest")]),t._v(" 。 该模块以类的形式定义测试。")]),t._v(" "),e("ul",[e("li",[t._v("主要测试对象：数据模型")]),t._v(" "),e("li",[t._v("运行方法："),e("code",[t._v("python manage.py test")])]),t._v(" "),e("li",[t._v("测试文件： app 目录下的 "),e("code",[t._v("test.py")])])])])}),[],!1,null,null,null);a.default=_.exports}}]);