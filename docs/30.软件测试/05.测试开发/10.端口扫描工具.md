# 端口扫描工具

##  1.0 版本

::: tip

**需求：**
    1.完成一个端口的扫描

:::

```python
import socket

def scanPort():
    # 1.使用 TCP 协议扫描端口
    sk = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

    # 2.设置连接时间
    sk.settimeout(0.5)

    scan_ip = input("请输入需要扫描的IP：")
    scan_port = input("请输入需要扫描的port：")

    try:
        # 3.创建连接
        conn = sk.connect_ex((scan_ip, int(scan_port)))
        if conn == 0:
            print(f'主机：{scan_ip}，端口：{scan_port} 已开放。')
        
        # 4.关闭 socket
        sk.close()

    except:
        pass


if __name__ == '__main__':
    scanPort()
```

运行结果：

```python
请输入需要扫描的IP：127.0.0.1
请输入需要扫描的port：9999
主机：127.0.0.1，端口：9999 已开放。
```

## 2.0 版本

::: tip

需求：
    1.需要能够扫描全部
    
方案：
    1.循环扫描

:::

```python
import socket

def portScan(address, startPort, endPort):
    try:
        for i in range(startPort, endPort):
            # 实现 TCP 连接
            sk = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            # 限制连接时间 0.5s
            sk.settimeout(0.5)
            conn = sk.connect_ex((address, i))
            if conn == 0:
                print(f'主机：{address}，端口：{i} 已开放。')
            sk.close()
    except Exception:
        pass

if __name__ == '__main__':
    portScan("127.0.0.1", 9990, 10000)
```

运行结果：

```python
主机：127.0.0.1，端口：9999 已开放。
```

