# 正则表达式

[正则表达式 --- 验证网站![image](https://i.loli.net/2021/04/26/QNkSVvjtKbBMm9I.png)](https://regex101.com/)

## 一、 常用语法

**`. * + ? \ [ ] ^ $ { } | ( )`**

### 1. 点 `.` --- 匹配所有字符

`.` ：表示要匹配除了 **换行符** 之外的 所有 **`单个`** 字符 。

```python
content = '''苹果是绿色的
橙子是橙色的
香蕉是黄色的
乌鸦是黑色的'''

import re
p = re.compile(r'.色')
for one in  p.findall(content):
    print(one)
```

执行结果：`.色`

```python
绿色
橙色
黄色
黑色
```

### 2. 星号 `*` --- 重复匹配任意次

`*` ：表示匹配前面的子表达式任意次，**包括 0 次**

```python
content = '''苹果，是绿色的
橙子，是橙色的
香蕉，是黄色的
乌鸦，是黑色的
猴子，'''

import re
p = re.compile(r'，.*')
for one in  p.findall(content):
    print(one)
```

执行结果：`，.*`

```python
，是绿色的
，是橙色的
，是黄色的
，是黑色的
，
```

-   紧跟在 `.` 后面， 表示 任意字符可以出现任意次， 所以整个表达式的意思就是在逗号后面的 所有字符，包括逗号

-   `.*` 在正则表达式中非常常见，表示匹配任意字符任意次数。
-    `*` 前面不是非得是 **点** ，也可以是其它字符

### 3. 加号 `+` --- 重复匹配多次

`+` ：表示匹配前面的子表达式一次或多次，**不包括0次**。

```python
content = '''苹果，是绿色的
橙子，是橙色的
香蕉，是黄色的
乌鸦，是黑色的
猴子，'''

import re
p = re.compile(r'，.+')
for one in  p.findall(content):
    print(one)
```

执行结果：`，.+`

```python
，是绿色的
，是橙色的
，是黄色的
，是黑色的
```

### 4. 问号 `？` --- 匹配 0 ~ 1 次

`?` ：表示匹配前面的子表达式 **0** 次或 1 次。

```python
content = '''苹果，是绿色的
橙子，橙色的
香蕉，黄色的
乌鸦，黑色的
猴子，'''

import re
p = re.compile(r'，.?')
for one in  p.findall(content):
    print(one)
```

执行结果：`，.?`

```python
，绿
，橙
，黄
，黑
，
```

### 5. 花括号 `{}` --- 匹配指定次数

`{}` ：表示 前面 的字符匹配 **指定的次数**

```python
红彤彤，绿油油，黑乎乎，绿油油油油
```

执行结果：`油{3,4}`

-   `油{3}` ：就表示匹配 连续的 油 字 3次
-   `油{3,4}` ：就表示匹配 连续的 油 字 至少3次，至多 4 次

![image](https://i.loli.net/2021/04/26/cm6HW8PLwDgZy5t.png)

### 6. 贪婪模式 和 非贪婪模式

`*` 、 `+`  ：在正则表达式中都是 **贪婪的** ，他们会尽可能多的去匹配。

非贪婪模式，也就是在星号后面加上 `?` 

```python
source = '<html><head><title>Title</title>'

import re
# 注意多出的问号
p = re.compile(r'<.*?>')

print(p.findall(source))
```

执行结果：

```python
['<html>', '<head>', '<title>', '</title>']
```

### 7. 对元字符转义

`\` ：反斜杠配合元字符使用，可以对元字符进行 **转义** ，使其成为普通字符

```python
content = '''苹果.是绿色的
橙子.是橙色的
香蕉.是黄色的'''

import re
p = re.compile(r'.*\.')
for one in  p.findall(content):
    print(one)
```

执行结果：`.*\.`

```python
苹果.
橙子.
香蕉.
```

### 8. 匹配某种字符类型

`\d` ：匹配 `0-9` 之间任意一个数字字符，等价于表达式 `[0-9]`

`\D` ：匹配任意一个不是 `0-9` 之间的数字字符，等价于表达式 `[^0-9]`

`\s` ：匹配任意一个空白字符，包括 空格、tab、换行符等，等价于表达式 `[\t\n\r\f\v]`

`\S` ：匹配任意一个非空白字符，等价于表达式 `[^ \t\n\r\f\v]`

`\w` ：匹配任意一个文字字符，包括大小写字母、数字、下划线，等价于表达式 `[a-zA-Z0-9_]`缺省情况也包括 `Unicode`文字字符，如果指定 ASCII 码标记，则只包括ASCII字母

`\W` ：匹配任意一个非文字字符，等价于表达式 `[^a-zA-Z0-9_]`

**反斜杠** 也可以用在方括号里面，比如 `[\s,.]` 表示匹配 ： 任何空白字符， 或者逗号，或者点

